<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>AgroTetris</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style type="text/css">
	*
	{
		margin: 0;
		padding: 0;
		border: none;
		background: rgba(0,0,0,0);
	}
	body, html
	{
		background: black;
		color: white;
		font-size: 2.2vh;
		font-family: Arial, Helvetica, sans-serif;
	}
	main
	{
		position: relative;
		min-height: 80vh;
		left: 50%;
		width: 50vh;
		margin-left: -25vh;
		margin-top: 8vh;
		margin-bottom: 25vh;
	}
	nav, footer
	{
		position: fixed;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-around;
		align-items: center;
		align-content: center;
		width: 100%;
		height: 7vh;
		background: rgba(0,0,0,0.7);
	}
	nav
	{
		top: 0;
		border-bottom: solid 0.4vh #6B6B6B;
	}
	#hamburger, #showPlan
	{
		width: 5vh;
		height: 5vh;
	}
	#statistics
	{
		height: 5vh;
		width: 35vh;
		display: flex;
		flex-direction: row;
		flex-wrap: nowrap;
		justify-content: center;
		align-items: center;
		align-content: center;
		font-size: 2.5vh;
		font-weight: bold;
	}
	footer
	{
		bottom: 0;
		border-top: solid 0.4vh #6B6B6B;
	}
	.window
	{
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		max-width: 50vh;
		max-height: 90vh;
		overflow-x: hidden;
		overflow-y: scroll;
		scrollbar-width: none;
		-ms-overflow-style: none;
		border: solid 0.4vh #393939;
		background: #2F2F2F;
		box-shadow: 0 0 1.5vh 1vh black;
		display: flex;
		flex-direction: column;
		flex-wrap: nowrap;
		justify-content: space-between;
		align-items: center;
		align-content: center;
		gap: 2vh;
		padding: 1vh;
		padding-top: 1.5vh;
	}
	.window::-webkit-scrollbar
	{
		display: none;
	}
	.window .content
	{
		width: 100%;
		text-align: center;
	}
	.window button
	{
		height: 6vh;
		min-width: 7vh;
		padding: 0.5vh;
		padding-left: 5vh;
		padding-right: 5vh;
		border: none;
		border-radius: 3vh;
		background: black;
		color: white;
		font-size: 2.4vh;
	}
	#error
	{
		background: #2f0000;
		width: 45vh;
		height: 27vh;
		border-color: #750700;
	}
	#tutorial
	{
		background: #0761b1;
		width: 45vh;
		height: 27vh;
		border-color: #07256b;
	}
	#curtain
	{
		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		width: 47vh;
		height: 60vh;
		border: solid 0.4vh #4D4D4D;
		background: #1b1b1b;
		box-shadow: 0 0 5vh 10vh black;
		display: flex;
		flex-direction: column;
		flex-wrap: wrap;
		justify-content: center;
		gap: 3vh;
		align-items: center;
		align-content: center;
		padding: 1vh;
		padding-top: 1vh;
	}
	#curtain button
	{
		height: 6vh;
		min-width: 7vh;
		padding: 0.5vh;
		padding-left: 5vh;
		padding-right: 5vh;
		border: none;
		border-radius: 3vh;
		background: black;
		color: white;
		font-size: 2.4vh;
	}
	#placeName
	{
		width: 40vh;
		height: 5vh;
	}
	#placeName section
	{
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: row;
		flex-wrap: nowrap;
		justify-content: center;
		align-items: center;
		align-content: center;
		font-size: 2.5vh;
		font-weight: bold;
	}
	footer button
	{
		background: #6B6B6B;
		border: none;
		border-radius: 2.5vh;
		padding: 0.5vh;
		padding-left: 1vh;
		padding-right: 1vh;
		min-width: 6vh;
		height: 5vh;
		font-size: 2.5vh;
		font-weight: bold;
		color: black;
	}
	#rowPlace
	{
		position: relative;
		width: 100%;
		margin-bottom: 5vh;
	}
	#rowPlace section
	{
		position: relative;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: space-around;
		align-items: center;
		align-content: center;
		width: 100%;
		height: auto;
		background: rgba(0,0,0,0);
	}
	#rowPlace .box
	{
		border-color: #cf7f00;
	}
	.row
	{
		position: relative;
		width: 100%;
	}
	.row section
	{
		position: relative;
		display: flex;
		flex-direction: row;
		flex-wrap: nowrap;
		justify-content: space-between;
		align-items: center;
		align-content: center;
		width: 100%;
		height: auto;
		background: rgba(0,0,0,0);
	}
	.box
	{
		position: relative;
		box-sizing: content-box;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: center;
		align-items: center;
		align-content: center;
		gap: 0.7vh;
		padding: 0.7vh;
		border: dashed 0.5vh #6B6B6B;
		min-height: 9vh;
		min-width: 6vh;
		max-width: 19.5vh;
		margin-top: 1vh;
		margin-bottom: 1vh;
	}
	.box.right
	{
		flex-direction: row-reverse;
	}
	.ghost
	{
		opacity: 0;
	}
	.ghost *
	{
		display: none;
	}
	.chest
	{
		position: relative;
		box-sizing: border-box;
		display: flex;
		flex-direction: column;
		flex-wrap: wrap;
		justify-content: center;
		align-items: center;
		align-content: center;
		height: 9vh;
		width: 6vh;
		font-size: 2vh;
		border-top: solid 1vh rgba(0,0,0,0.5);
		border-left: solid 1vh rgba(55,55,55,0.5);
		border-right: solid 1vh rgba(200,200,200,0.5);
		border-bottom: solid 1vh rgba(255,255,255,0.5);
		background: green;
		color: black;
		text-transform: uppercase;
	}
	.chest span
	{
		-webkit-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
	.chest span:last-child
	{
		font-weight: bold;
	}
	#car .chest
	{
		height: 10.5vh;
		width: 7vh;
		font-size: 2.3vh;
	}
	#hand .chest
	{
		height: 12vh;
		width: 8vh;
		font-size: 2.65vh;
	}
	#car
	{
		position: relative;
		width: 42vh;
		height: 105vh;
		background: #252525;
		left: 50%;
		margin-left: -21vh;
		margin-top: 1vh;
	}
	#car section
	{
		position: relative;
		float: left;
		display: flex;
		flex-direction: column-reverse;
		flex-wrap: nowrap;
		justify-content: flex-start;
		align-items: center;
		align-content: center;
		width: 7vh;
		height: 100%;
		box-shadow: inset 0 0 0 0.4vh #252525, inset 0 0 0 0.9vh #111111;
	}
	#hand
	{
		position: fixed;
		box-sizing: content-box;
		bottom: 9vh;
		left: 1vh;
		padding: 1vh;
		border: dashed 0.5vh #6B6B6B;
		height: 12vh;
		width: 8vh;
		background: rgba(0,0,0,0.6);
		box-shadow: 0 0 0 1vh rgba(0,0,0,0.6);
	}
	.hidden
	{
		display: none !important;
	}
	#routes
	{
		width: 45vh;
		height: 65vh;
		background: #250039;
		border-color: #390057;
		justify-content: flex-start;
	}
	#routes span
	{
		font-size: 2.5vh;
		font-weight: bold;
		margin-bottom: 3vh;
	}
	#routes .content
	{
		width: 100%;
		height: auto;
		display: flex;
		flex-direction: row;
		flex-wrap: wrap;
		justify-content: center;
		align-items: flex-start;
		align-content: flex-start;
	}
	#routes section
	{
		display: flex;
		flex-direction: column;
		flex-wrap: nowrap;
		justify-content: flex-start;
		align-items: center;
		align-content: center;
		margin-left: 1vh;
		margin-right: 1vh;
	}
	#routes .route
	{
		position: relative;
		box-sizing: border-box;
		display: flex;
		flex-direction: column;
		flex-wrap: nowrap;
		justify-content: center;
		align-items: center;
		align-content: flex-start;
		width: 12.5vh;
		height: 12.5vh;
		margin-top: 1vh;
		margin-bottom: 1vh;
		background: #f7cf00;
		border: solid 0.5vh black;
	}
	#routes .route svg
	{
		width: 100%;
	}
	#routes .route span
	{
		width: 100%;
		height: auto;
		margin-bottom: 0.5vh;
		font-size: 1.7vh;
		color: black;
	}
	#plan
	{
		width: 47vh;
		height: 50vh;
		background: #b1b1b1;
		border-color: #4d4d4d;
		color: black;
	}
	#plan .content
	{
		display: flex;
		justify-content: center;
		font-size: 2.1vh;
	}
	#plan table
	{
		border-collapse: collapse;
	}
	#plan td, #plan th
	{
		border: 0.3vh solid black;
		padding: 0.5vh
	}
	#finish
	{
		width: 45vh;
		height: 65vh;
		background: #390000;
		border-color: #6b0700;
		color: white;
	}
	#finish.complete
	{
		background: #2f3900;
		border-color: #576b00;
	}
	#finish .content
	{
		display: flex;
		flex-direction: column;
		flex-wrap: wrap;
		justify-content: flex-start;
		align-items: center;
		align-content: center;
		font-size: 2.1vh;
	}
	#finish table
	{
		border-collapse: collapse;
	}
	#finish td, #finish th
	{
		border: 0.3vh solid white;
		padding: 0.5vh
	}
	#finish span
	{
		display: block;
		font-size: 2.4vh;
		margin-bottom: 2vh;
	}
</style>
<script>
	const unlockedAll = false;
	document.addEventListener('dblclick', function (e)
	{
		e.preventDefault();
	});
	const system =
	{
		load()
		{
			if (results.length === 0)
			{
				for (let i=0 ; i<system.routes.length ; i++)
				{
					results[i] = []
					for (let j=0 ; j<system.routes[i].length ; j++)
					{
						results[i][j] = {unlocked: false, data:[]}
					}
				}
				localStorage.setItem('agro-tetris: results',JSON.stringify(results))
			}
			refreshStatistics()
			situation.click = 0
			situation.hand = 0
			situation.places = [{publisher:[]}]
			situation.commodity = []
			document.getElementsByTagName('footer')[0].getElementsByTagName('button')[0].onclick = next
			document.getElementById('showPlan').onclick = showPlan
			document.getElementById('hamburger').onclick = showRoutes
			const divWin = document.getElementsByClassName('window')
			for (let div of divWin)
			{
				(div.getElementsByTagName('button')[0]||{}).onclick = system.close
			}
			el.main = document.getElementsByTagName('main')[0]
			el.hand = document.getElementById('hand')
			el.placeName = document.getElementById('placeName')
			el.places = []
			if (true)
			{
				el.rowPlace = document.createElement('div')
				el.rowPlace.id = 'rowPlace'
				const section = document.createElement('section')
				const box = document.createElement('div')
				box.className = 'box'
				el.places[0] = [box,0]
				section.appendChild(box)
				el.rowPlace.appendChild(section)
				el.main.appendChild(el.rowPlace)
			}
			const row = document.createElement('div')
			row.className = 'row'
			el.main.appendChild(row)
			el.cubby = [[0]]
			situation.cubby = [[0]]
			for (let s=0 ; s<2 ; s++)
			{
				const section = document.createElement('section')
				for (let b=0 ; b<2 ; b++)
				{
					const nr = 1+(s*2)+b
					const box = document.createElement('div')
					box.className = `box ${['left','right'][b]}`
					box.dataset.place = `cubby`
					box.dataset.type = `0`
					box.dataset.nr = `${nr}`
					el.cubby[0][nr] = box
					situation.cubby[0][nr] = []
					box.onclick = click.box
					section.appendChild(box)
				}
				row.appendChild(section)
			}
			situation.car = [[0]]
			el.car = [[0]]
			if (true)
			{
				const car = document.createElement('div')
				car.id = 'car'
				for (let s=0 ; s<6 ; s++)
				{
					const nr = s+1
					const section = document.createElement('section')
					section.dataset.place = `car`
					section.dataset.type = `0`
					section.dataset.nr = `${nr}`
					el.car[0][nr] = section
					situation.car[0][nr] = []
					section.onclick = click.box
					car.appendChild(section)
				}
				row.appendChild(car)
			}
			if (localStorage.getItem('agro-tetris: situation'))
			{
				situation = JSON.parse(localStorage.getItem('agro-tetris: situation'))
				system.refresh()
				curtain.open()
			}
			else
			{
				showRoutes()
			}
		},
		newRoutes: function(lvl,route)
		{
			document.getElementById('routes').classList.add('hidden')
			route = route || system.routes[lvl[0]][lvl[1]]
			situation.time = [[]]
			situation.moves = [0]
			situation.points = 0
			situation.dam = route.dam
			situation.required = required(route,lvl)
			if (lvl)
			{
				situation.lvl = [lvl[0],lvl[1]]
				situation.lvlName = route.name
			}
			else
			{
				situation.lvl = 0
				situation.lvlName = 'Losowa'
			}
			situation.place = 0
			situation.hand = 0
			situation.commodity = []
			situation.places = []
			situation.car = [[0,[],[],[],[],[],[]]]
			situation.namePlaces = []
			situation.places[0] = [[],[]]
			situation.namePlaces[0] = {name: 'Załadunek', short:'ZŁD', chicken:0, meat:0, smoke:0}
			situation.tutorial = []
			let column = 0
			for (const shop of route.shops)
			{
				const placeNameRow = {name:shop.name, short:shop.short.toUpperCase(), chicken:0, meat:0, smoke:0}
				situation.time.push([])
				situation.moves.push(0)
				for (let i=0 ; i<3 ; i++)
				{
					let values = shop.commodity[i]
					if (!Array.isArray(values))
					{
						values = [values]
					}
					for (let j=0 ; j<values.length ; j++)
					{
						if (values[j] > 0)
						{
							column ++
							placeNameRow[['chicken','meat','smoke'][i]] += values[j]
							const chest = {content: true}
							chest.type = ['chicken','meat','smoke'][i]
							chest.value = values[j]
							chest.shop = shop.name
							chest.short = shop.short
							situation.commodity.push(chest)
						}
					}
				}
				const place = [[],[]]
				for (let i=0 ; i<3 ; i++)
				{
					let values = shop.empty[i]
					if (!Array.isArray(values))
					{
						values = [values]
					}
					for (let j=0 ; j<values.length ; j++)
					{
						if (values[j] > 0)
						{
							const chest = {content: false}
							chest.type = ['chicken','meat','smoke'][i]
							chest.value = values[j]
							place[0].push(chest)
						}
					}
				}
				situation.places.push(place)
				situation.namePlaces.push(placeNameRow)
			}
			if (column > 60)
			{
				debugger
			}
			click.publisher()
			system.refresh()
			curtain.open()
			showPlan()
		},
		refresh: function()
		{
			for (let i=1 ; i<situation.cubby[0].length ; i++)
			{
				refreshBox(situation.cubby[0][i],el.cubby[0][i])
			}
			for (let i=1 ; i<situation.car[0].length ; i++)
			{
				refreshBox(situation.car[0][i],el.car[0][i])
			}
			el.placeName.innerHTML = ''
			for (let i=0 ; i<situation.namePlaces.length ; i++)
			{
				const section = document.createElement('section')
				section.innerHTML = situation.namePlaces[i].name
				if (i != situation.place)
				{
					section.classList.add('hidden')
				}
				el.placeName.appendChild(section)
			}
			el.rowPlace.innerHTML = ''
			el.places = []
			for (let i=0 ; i<situation.places.length ; i++)
			{
				const section = document.createElement('section')
				if (i === 0)
				{
					const box = document.createElement('div')
					box.className = 'box'
					el.places[0] = [box,0]
					box.onclick = click.publisher
					section.appendChild(box)
					refreshBox(situation.places[0][0],box)
				}
				else
				{
					el.places[i] = []
					for (let j=0 ; j<2 ; j++)
					{
						const box = document.createElement('div')
						box.className = 'box'
						el.places[i][j] = box
						box.dataset.place = `places`
						box.dataset.type = `${i}`
						box.dataset.nr = `${j}`
						box.onclick = click.box
						section.appendChild(box)
						refreshBox(situation.places[i][j],box)
					}
				}
				if (i != situation.place)
				{
					section.classList.add('hidden')
				}
				el.rowPlace.appendChild(section)
			}
		},
		routes:
		[
			[
				{
					name: "Samouczek",
					required: 2000,
					dam: 2,
					shops:
					[
						{
							name: "Kłoda",
							short: "KŁD",
							commodity: [10,10,6],
							empty: [10,10,10],
						},
						{
							name: "Rydzyna",
							short: "RDZ",
							commodity: [10,10,6],
							empty: [10,10,10],
						},
						{
							name: "Bojanowo",
							short: "BJN",
							commodity: [10,10,6],
							empty: [7,7,7],
						},
						{
							name: "Golina W",
							short: "GOL",
							commodity: [10,10,6],
							empty: [3,3,3],
						},
						{
							name: "Czernina",
							short: "CZR",
							commodity: [10,10,6],
							empty: [10,10,10],
						},
						{
							name: "Witaszyce",
							short: "WIT",
							commodity: [10,10,6],
							empty: [10,10,10],
						},
						{
							name: "Góra 4",
							short: "GR4",
							commodity: [10,10,10],
							empty: [8,8,8],
						},
						{
							name: "Góra 1",
							short: "GR1",
							commodity: [10,10,10],
							empty: [2,2,2],
						},
						{
							name: "Góra 3",
							short: "GR3",
							commodity: [10,10,10],
							empty: [10,10,10],
						},
						{
							name: "Góra 5",
							short: "GR5",
							commodity: [10,10,10],
							empty: [10,10,10],
						},
						{
							name: "Góra 2",
							short: "GR2",
							commodity: [10,10,10],
							empty: [5,5,5],
						},
						{
							name: "Niechlów",
							short: "NCH",
							commodity: [10,10,10],
							empty: [5,5,5],
						},
					]
				},
				{
					name: 'Kobylin',
					required: 920,
					dam: 2,
					shops:
					[
						{
							name: 'Rawicz 3',
							short: 'RA3',
							commodity: [4,5,2],
							empty: [3,6,3],
						},
						{
							name: 'Rawicz 2',
							short: 'RA2',
							commodity: [4,8,2],
							empty: [5,9,2],
						},
						{
							name: 'Rawicz 1',
							short: 'RA1',
							commodity: [4,5,3],
							empty: [3,6,2],
						},
						{
							name: 'Słupia kapitulna',
							short: 'SŁP',
							commodity: [8,6,7],
							empty: [9,7,6],
						},
						{
							name: 'Chojno',
							short: 'CHN',
							commodity: [5,4,4],
							empty: [4,3,3],
						},
						{
							name: 'Pakosław',
							short: 'PAK',
							commodity: [7,7,5],
							empty: [6,8,6],
						},
						{
							name: 'Nowy sielec',
							short: 'NSC',
							commodity: [7,6,3],
							empty: [6,5,2],
						},
						{
							name: 'Jutrosin',
							short: 'JUT',
							commodity: [9,10,6],
							empty: [8,9,5],
						},
						{
							name: 'Smolice',
							short: 'SMO',
							commodity: [[5,6],10,7],
							empty: [8,7,6],
						},
						{
							name: 'Kobylin 2',
							short: 'KO2',
							commodity: [9,[6,5],6],
							empty: [[7,5],10,5],
						},
						{
							name: 'Kobylin 1',
							short: 'KO1',
							commodity: [8,9,5],
							empty: [9,10,6],
						},
					],
				},
				{
					name: 'Sieroszewice',
					required: 796,
					dam: 2,
					shops:
					[
						{
							name: 'Janków przygodzki',
							short: 'JAN',
							commodity: [10,10,9],
							empty: [[6,5],[6,5],10],
						},
						{
							name: 'Przygodzice',
							short: 'PRZ',
							commodity: [9,[6,5],7],
							empty: [8,10,6],
						},
						{
							name: 'Ostrów 15',
							short: 'O15',
							commodity: [6,6,4],
							empty: [5,5,7],
						},
						{
							name: 'Wysocko wielkie',
							short: 'WYS',
							commodity: [8,9,4],
							empty: [9,8,5],
						},
						{
							name: 'Wtórek',
							short: 'WTR',
							commodity: [[5,6],10,6],
							empty: [[6,6],7,7],
						},
						{
							name: 'Sieroszewice',
							short: 'SIR',
							commodity: [[9,10],[7,7],9],
							empty: [[9,7],[8,9],8],
						},
						{
							name: 'Wielowieś',
							short: 'WLW',
							commodity: [8,10,4],
							empty: [9,9,5],
						},
						{
							name: 'Wola droszewska',
							short: 'WDR',
							commodity: [7,5,3],
							empty: [8,4,2],
						},
					],
				},
				{
					name: 'Pleszewy',
					required: 842,
					dam: 2,
					shops:
					[
						{
							name: 'Witaszyce',
							short: 'WIT',
							commodity: [9,[7,5],6],
							empty: [10,[7,8],5],
						},
						{
							name: 'Kotlin 2',
							short: 'KOT',
							commodity: [9,9,9],
							empty: [10,10,8],
						},
						{
							name: 'Kowalew',
							short: 'KWL',
							commodity: [7,[8,5],6],
							empty: [8,[7,7],5],
						},
						{
							name: 'Pleszew 3',
							short: 'P3',
							commodity: [9,10,7],
							empty: [10,[6,5],8],
						},
						{
							name: 'Pleszew 5',
							short: 'P5',
							commodity: [[7,7],[10,6],10],
							empty: [[9,8],[8,7],9],
						},
						{
							name: 'Pleszew 2',
							short: 'P2',
							commodity: [7,8,5],
							empty: [6,7,2],
						},
						{
							name: 'Pleszew 4',
							short: 'P4',
							commodity: [[7,4],[7,6],6],
							empty: [10,[7,7],5],
						},
						{
							name: 'Pleszew 1',
							short: 'P1',
							commodity: [7,4,3],
							empty: [8,2,2],
						},
					],
				},
				{
					name: 'Zagórów',
					required: 1032,
					dam: 2,
					shops:
					[
						{
							name: 'Kołaczkowo',
							short: 'KOŁ',
							commodity: [9,7,6],
							empty: [6,6,7],
						},
						{
							name: 'Sokolniki',
							short: 'SKL',
							commodity: [7,7,6],
							empty: [8,10,5],
						},
						{
							name: 'Ciążeń',
							short: 'CĄŻ',
							commodity: [5,7,5],
							empty: [4,6,8],
						},
						{
							name: 'Lądek',
							short: 'LĄD',
							commodity: [6,6,4],
							empty: [3,3,1],
						},
						{
							name: 'Zagórów',
							short: 'ZGR',
							commodity: [[8,8],[8,5,8],[5,6]],
							empty: [5,7,3],
						},
						{
							name: 'Pyzdry 2',
							short: 'PZ2',
							commodity: [7,8,5],
							empty: [8,7,2],
						},
						{
							name: 'Pyzdry 1',
							short: 'PZ1',
							commodity: [8,6,9],
							empty: [7,7,4],
						},
						{
							name: 'Komorze przybysławskie',
							short: 'KOM',
							commodity: [4,3,3],
							empty: [5,6,2],
						},
						{
							name: 'Żerków 2',
							short: 'ŻR2',
							commodity: [6,7,6],
							empty: [5,5,7],
						},
						{
							name: 'Żerków 1',
							short: 'ŻR1',
							commodity: [4,7,5],
							empty: [5,6,6],
						},
						{
							name: 'Chrzan',
							short: 'CH',
							commodity: [7,6,6],
							empty: [4,7,1],
						},
						{
							name: 'Wilkowyja',
							short: 'WLK',
							commodity: [6,8,7],
							empty: [5,7,6],
						},
					],
				},
				{
					name: 'Nowe Sole',
					required: 1122,
					dam: 2,
					shops:
					[
						{
							name: 'Jerzmanowa',
							short: 'JEZ',
							commodity: [9,[6,5],5],
							empty: [[7,5],10,4],
						},
						{
							name: 'Nielubia',
							short: 'NLB',
							commodity: [9,[5,6],6],
							empty: [6,10,5],
						},
						{
							name: 'Bytom odrzański 1',
							short: 'BY1',
							commodity: [5,5,2],
							empty: [2,4,2],
						},
						{
							name: 'Bytom odrzański 2',
							short: 'BY2',
							commodity: [5,8,3],
							empty: [4,9,4],
						},
						{
							name: 'Nowa sól 1',
							short: 'NS1',
							commodity: [10,10,5],
							empty: [[6,5],9,6],
						},
						{
							name: 'Nowa sól 2',
							short: 'NS2',
							commodity: [7,9,5],
							empty: [6,6,8],
						},
						{
							name: 'Nowa sól 3',
							short: 'NS3',
							commodity: [[7,5],[9,8],8],
							empty: [[7,6],[10,8],9],
						},
						{
							name: 'Nowa sól 4',
							short: 'NS4',
							commodity: [10,9,6],
							empty: [[7,4],10,3],
						},
						{
							name: 'Modrzyca',
							short: 'MDZ',
							commodity: [[7,6],[7,7],10],
							empty: [[10,6],[8,7],7],
						},
						{
							name: 'Otyń',
							short: 'OTŃ',
							commodity: [8,6,4],
							empty: [7,7,5],
						},
						{
							name: 'Przyborów',
							short: 'PBR',
							commodity: [5,6,3],
							empty: [6,7,4],
						},
						{
							name: 'Siedlisko',
							short: 'SDL',
							commodity: [9,10,7],
							empty: [10,9,4],
						},
					],
				},
				{
					name: 'Pobiedziska',
					required: 1106,
					dam: 2,
					shops:
					[
						{
							name: 'Czapury',
							short: 'CZP',
							commodity: [8,[6,5],8],
							empty: [7,10,7],
						},
						{
							name: 'Kamionki',
							short: 'KAM',
							commodity: [[8,4],[8,6],6],
							empty: [[7,6],[8,7],9],
						},
						{
							name: 'Robakowo',
							short: 'ROB',
							commodity: [9,10,6],
							empty: [10,7,3],
						},
						{
							name: 'Koninko 1',
							short: 'KON',
							commodity: [8,[7,6],7],
							empty: [5,[9,5],8],
						},
						{
							name: 'Gowarzewo',
							short: 'GOW',
							commodity: [8,10,[6,5]],
							empty: [5,7,8],
						},
						{
							name: 'Zalasewo',
							short: 'ZAL',
							commodity: [[6,5],[7,5],8],
							empty: [[7,5],[6,5],9],
						},
						{
							name: 'Siekierki wielkie',
							short: 'SKR',
							commodity: [7,8,5],
							empty: [6,7,2],
						},
						{
							name: 'Paczkowo',
							short: 'PCZ',
							commodity: [5,5,3],
							empty: [4,4,2],
						},
						{
							name: 'Pobiedziska 2',
							short: 'PB2',
							commodity: [9,8,4],
							empty: [8,9,5],
						},
						{
							name: 'Pobiedziska 1',
							short: 'PB1',
							commodity: [[5,6],[8,6],9],
							empty: [10,[9,6],8],
						},
						{
							name: 'Kostrzyn',
							short: 'KOS',
							commodity: [8,9,8],
							empty: [9,8,[6,5]],
						},
					],
				},
				{
					name: 'Doruchów',
					required: 1210,
					dam: 2,
					shops:
					[
						{
							name: 'Topola mała',
							short: 'TOP',
							commodity: [8,10,7],
							empty: [9,[7,4],10],
						},
						{
							name: 'Strzyżew',
							short: 'STŻ',
							commodity: [9,[7,5],9],
							empty: [10,9,[7,5]],
						},
						{
							name: 'Mikstat 1',
							short: 'MK1',
							commodity: [8,10,6],
							empty: [7,9,5],
						},
						{
							name: 'Mikstat 2',
							short: 'MK2',
							commodity: [5,5,3],
							empty: [4,8,6],
						},
						{
							name: 'Kaliszkowice kaliskie',
							short: 'KAL',
							commodity: [6,8,5],
							empty: [5,5,8],
						},
						{
							name: 'Siedlików',
							short: 'SDL',
							commodity: [10,[6,5],4],
							empty: [[6,5],10,2],
						},
						{
							name: 'Bukownica',
							short: 'BUK',
							commodity: [8,9,5],
							empty: [9,6,4],
						},
						{
							name: 'Doruchów',
							short: 'DOR',
							commodity: [[7,6],[8,7],9],
							empty: [[9,7],[8,6],6],
						},
						{
							name: 'Grabów 1',
							short: 'G1',
							commodity: [10,[6,5],7],
							empty: [7,10,10],
						},
						{
							name: 'Grabów 2',
							short: 'G2',
							commodity: [10,[5,6],6],
							empty: [9,10,5],
						},
						{
							name: 'Kraszewice',
							short: 'KRA',
							commodity: [10,9,6],
							empty: [[6,5],8,5],
						},
						{
							name: 'Czajków',
							short: 'CZJ',
							commodity: [9,[8,5],7],
							empty: [10,[6,6],8],
						},
					],
				},
				{
					name: 'Ostrowy',
					required: 1252,
					dam: 2,
					shops:
					[
						{
							name: 'Gorzyce wielkie 2',
							short: 'GRZ',
							commodity: [7,10,4],
							empty: [8,9,3],
						},
						{
							name: 'Ostrów 13',
							short: 'O13',
							commodity: [5,6,3],
							empty: [6,7,4],
						},
						{
							name: 'Ostrów 8',
							short: 'O8',
							commodity: [7,9,5],
							empty: [10,10,6],
						},
						{
							name: 'Ostrów 2',
							short: 'O2',
							commodity: [9,9,7],
							empty: [[7,5],10,4],
						},
						{
							name: 'Ostrów 10',
							short: 'O10',
							commodity: [[8,5],[7,7],[6,5]],
							empty: [10,[6,7],[8,4]],
						},
						{
							name: 'Ostrów 16',
							short: 'O16',
							commodity: [6,8,4],
							empty: [9,9,5],
						},
						{
							name: 'Ostrów 3',
							short: 'O3',
							commodity: [10,[6,5],7],
							empty: [9,10,6],
						},
						{
							name: 'Sobótka',
							short: 'SOB',
							commodity: [9,[6,5],5],
							empty: [10,10,6],
						},
						{
							name: 'Lewków',
							short: 'LEW',
							commodity: [8,10,7],
							empty: [5,9,8],
						},
						{
							name: 'Biskupice ołoboczne',
							short: 'BIS',
							commodity: [6,6,4],
							empty: [7,3,3],
						},
						{
							name: 'Skalmierzyce',
							short: 'SKL',
							commodity: [[9,5],[9,7],[6,5]],
							empty: [[7,6],[10,7],10],
						},
						{
							name: 'Kalisz 4',
							short: 'K4',
							commodity: [[8,7],[7,8],9],
							empty: [[10,6],[9,7],10],
						},
					],
				},
				{
					name: 'Dziadowa Kłoda',
					required: 1316,
					dam: 2,
					shops:
					[
						{
							name: 'Stradomia wierzchnia',
							short: 'STR',
							commodity: [8,10,8],
							empty: [9,[7,4],9],
						},
						{
							name: 'Dziadowa kłoda',
							short: 'KŁD',
							commodity: [[6,7],[10,8],9],
							empty: [10,[8,9],10],
						},
						{
							name: 'Perzów',
							short: 'PEZ',
							commodity: [8,9,6],
							empty: [[6,5],10,5],
						},
						{
							name: 'Nowy dwór',
							short: 'ND',
							commodity: [9,9,6],
							empty: [8,8,7],
						},
						{
							name: 'Syców',
							short: 'SC',
							commodity: [9,9,7],
							empty: [10,10,6],
						},
						{
							name: 'Wioska',
							short: 'WIO',
							commodity: [9,9,8],
							empty: [8,8,9],
						},
						{
							name: 'Międzybórz',
							short: 'MDZ',
							commodity: [7,10,7],
							empty: [8,[6,5],6],
						},
						{
							name: 'Kobyla góra',
							short: 'KG',
							commodity: [[7,7],[7,6],10],
							empty: [[8,7],10,[6,5]],
						},
						{
							name: 'Rojów ',
							short: 'ROJ',
							commodity: [10,[7,5],8],
							empty: [[6,5],[7,8],7],
						},
						{
							name: 'Olszyna',
							short: 'OSZ',
							commodity: [7,9,5],
							empty: [8,8,4],
						},
						{
							name: 'Rogaszyce',
							short: 'ROG',
							commodity: [7,8,9],
							empty: [6,5,8],
						},
						{
							name: 'Ostrzeszów',
							short: 'OST',
							commodity: [[5,6],[5,6],8],
							empty: [10,10,9],
						},
					],
				},
				{
					name: 'Poznań',
					required: 1260,
					dam: 2,
					shops:
					[
						{
							name: 'Nochowo',
							short: 'NOH',
							commodity: [8,[5,6],7],
							empty: [9,10,8],
						},
						{
							name: 'Śrem 1',
							short: 'Ś1',
							commodity: [7,9,4],
							empty: [6,8,3],
						},
						{
							name: 'Śrem 2',
							short: 'Ś2',
							commodity: [7,10,4],
							empty: [6,[6,5],3],
						},
						{
							name: 'Brodnica',
							short: 'BRD',
							commodity: [10,10,6],
							empty: [9,9,3],
						},
						{
							name: 'Pecna',
							short: 'PEC',
							commodity: [8,8,6],
							empty: [[10,7],[10,9,7],10],
						},
						{
							name: 'Mosina',
							short: 'MOS',
							commodity: [[7,4],[9,6],8],
							empty: [10,[9,7],7],
						},
						{
							name: 'Witobel',
							short: 'WIT',
							commodity: [10,10,7],
							empty: [[5,6],9,4],
						},
						{
							name: 'Stęszew 2',
							short: 'STĘ',
							commodity: [9,[7,5],10],
							empty: [8,[7,6],9],
						},
						{
							name: 'Komorniki',
							short: 'KOM',
							commodity: [9,9,6],
							empty: [6,[8,4],7],
						},
						{
							name: 'Plewiska',
							short: 'PLW',
							commodity: [[7,5],[9,6],7],
							empty: [[6,5],[9,5],6],
						},
						{
							name: 'Poznań 1',
							short: 'PZ1',
							commodity: [[7,5],[6,6],10],
							empty: [[7,8],9,9],
						},
						{
							name: 'Poznań 2',
							short: 'PZ2',
							commodity: [8,10,8],
							empty: [7,9,7],
						},
					],
				},
				{
					name: 'Jelcz Laskowice',
					required: 1382,
					dam: 2,
					shops:
					[
						{
							name: 'Ligota piękna',
							short: 'LIG',
							commodity: [[8,6],[8,9],[8,4]],
							empty: [[5,6],[7,5,8],[6,7]],
						},
						{
							name: 'Siedlec',
							short: 'SDL',
							commodity: [8,10,5],
							empty: [9,7,8],
						},
						{
							name: 'Długołęka 1',
							short: 'DŁG',
							commodity: [[7,5],[10,7],[6,5]],
							empty: [9,[9,7],8],
						},
						{
							name: 'Wrocław 4',
							short: 'W4',
							commodity: [10,[6,7],8],
							empty: [7,[8,6],5],
						},
						{
							name: 'Kamieniec wrocławski',
							short: 'KAM',
							commodity: [10,[8,4],8],
							empty: [9,[7,8],7],
						},
						{
							name: 'Czernica',
							short: 'CZR',
							commodity: [[6,5],[7,6],7],
							empty: [[7,5,7],[10,10,8],10],
						},
						{
							name: 'Jelcz laskowice',
							short: 'JEL',
							commodity: [[7,6],[6,5],7],
							empty: [[7,5],10,4],
						},
						{
							name: 'Stanowice',
							short: 'STN',
							commodity: [[5,6],[7,6],9],
							empty: [[7,7],[7,5],8],
						},
						{
							name: 'Siechnice',
							short: 'SCH',
							commodity: [9,[5,6],10],
							empty: [8,[7,5],7],
						},
						{
							name: 'Św. katarzyna',
							short: 'ŚWK',
							commodity: [10,10,6],
							empty: [[6,5],7,7],
						},
						{
							name: 'Wrocław 9',
							short: 'W9',
							commodity: [[7,6],[8,6],9],
							empty: [[9,5],[7,6],8],
						},
					],
				},
			],
			[
				{
					name: 'Raszków',
					required: 1130,
					dam: 2,
					shops:
					[
						{
							name: 'Kobierno',
							short: 'KOB',
							commodity: [6,8,7],
							empty: [7,9,8],
						},
						{
							name: 'Orpiszew',
							short: 'ORP',
							commodity: [7,10,6],
							empty: [6,9,7],
						},
						{
							name: 'Biadki',
							short: 'BIA',
							commodity: [8,6,4],
							empty: [7,7,7],
						},
						{
							name: 'Łąkociny',
							short: 'ŁKC',
							commodity: [9,8,6],
							empty: [10,7,7],
						},
						{
							name: 'Przybysławice',
							short: 'PBS',
							commodity: [10,8,4],
							empty: [9,[5,6],5],
						},
						{
							name: 'Raszków',
							short: 'RSZ',
							commodity: [[5,6],[8,7],8],
							empty: [[7,5],[9,7],9],
						},
						{
							name: 'Ligota',
							short: 'LIG',
							commodity: [7,7,5],
							empty: [8,6,6],
						},
						{
							name: 'Koźminiec',
							short: 'KOŹ',
							commodity: [7,9,5],
							empty: [8,[8,4],4],
						},
					],
				},
				{
					name: 'Głogów',
					required: 1070,
					dam: 2,
					shops:
					[
						{
							name: 'Pęcław',
							short: 'PCŁ',
							commodity: [10,[6,5],8],
							empty: [[5,6],8,[6,5]],
						},
						{
							name: 'Grębocice',
							short: 'GRB',
							commodity: [[6,5],[8,5],8],
							empty: [[8,4],[9,7],9],
						},
						{
							name: 'Głogów 3',
							short: 'GŁ3',
							commodity: [10,10,8],
							empty: [[6,5],9,9],
						},
						{
							name: 'Głogów 2',
							short: 'GŁ2',
							commodity: [9,8,10],
							empty: [8,9,9],
						},
						{
							name: 'Głogów 1',
							short: 'GŁ1',
							commodity: [8,9,5],
							empty: [9,6,2],
						},
						{
							name: 'Ruszowice 2',
							short: 'RU2',
							commodity: [8,8,5],
							empty: [7,7,2],
						},
						{
							name: 'Ruszowice 1',
							short: 'RU1',
							commodity: [[7,4],[7,6],9],
							empty: [[8,6],[8,6],[7,5]],
						},
					],
				},
				{
					name: 'Koźmin',
					required: 840,
					dam: 2,
					shops:
					[
						{
							name: 'Pogorzela 1',
							short: 'PG1',
							commodity: [[7,5],10,7],
							empty: [[8,5],7,4],
						},
						{
							name: 'Pogorzela 2',
							short: 'PG2',
							commodity: [7,8,4],
							empty: [6,5,7],
						},
						{
							name: 'Borzęciczki',
							short: 'BRZ',
							commodity: [7,8,4],
							empty: [4,9,5],
						},
						{
							name: 'Rusko',
							short: 'RUS',
							commodity: [5,6,7],
							empty: [4,5,6],
						},
						{
							name: 'Koźmin wlkp 1',
							short: 'KŹ1',
							commodity: [[6,5],[7,6],7],
							empty: [10,[9,7],8],
						},
						{
							name: 'Koźmin wlkp 2',
							short: 'KŹ2',
							commodity: [6,6,4],
							empty: [9,5,5],
						},
						{
							name: 'Rozdrażew 1',
							short: 'RD1',
							commodity: [5,9,5],
							empty: [6,10,6],
						},
						{
							name: 'Rozdrażew 2',
							short: 'RD2',
							commodity: [8,6,3],
							empty: [7,7,4],
						},
						{
							name: 'Krotoszyn 10',
							short: 'K10',
							commodity: [9,8,6],
							empty: [10,9,5],
						},
						{
							name: 'Benice',
							short: 'BEN',
							commodity: [8,8,4],
							empty: [7,5,5],
						},
					],
				},
				{
					name: 'Jarocin',
					required: 890,
					dam: 2,
					shops:
					[
						{
							name: 'Borek wlkp 1',
							short: 'BR1',
							commodity: [9,10,5],
							empty: [6,[5,6],8],
						},
						{
							name: 'Borek wlkp 2',
							short: 'BR2',
							commodity: [[6,5],8,6],
							empty: [8,5,9],
						},
						{
							name: 'Siedlemin',
							short: 'SDL',
							commodity: [6,7,4],
							empty: [9,8,5],
						},
						{
							name: 'Jarocin 4',
							short: 'J4',
							commodity: [10,9,9],
							empty: [9,10,10],
						},
						{
							name: 'Jarocin 5',
							short: 'J5',
							commodity: [[6,5],8,6],
							empty: [10,7,5],
						},
						{
							name: 'Jarocin 7',
							short: 'J7',
							commodity: [6,9,4],
							empty: [7,[6,6],5],
						},
						{
							name: 'Zakrzew',
							short: 'ZKW',
							commodity: [8,9,7],
							empty: [5,8,6],
						},
						{
							name: 'Golina 3',
							short: 'GOL',
							commodity: [7,9,6],
							empty: [6,10,5],
						},
						{
							name: 'Borzęcice 1',
							short: 'BĘC',
							commodity: [4,5,2],
							empty: [5,4,2],
						},
						{
							name: 'Dobrzyca',
							short: 'DOB',
							commodity: [8,9,8],
							empty: [9,10,[7,4]],
						},
					],
				},
				{
					name: 'Kościan',
					required: 1052,
					dam: 2,
					shops:
					[
						{
							name: 'Widziszewo',
							short: 'WIDZ',
							commodity: [10,8,6],
							empty: [4,4,1],
						},
						{
							name: 'Kościan 3',
							short: 'K3',
							commodity: [10,[8,7],6],
							empty: [4,10,3],
						},
						{
							name: 'Kościan 2',
							short: 'K2',
							commodity: [9,9,7],
							empty: [6,6,5],
						},
						{
							name: 'Kościan 1',
							short: 'K1',
							commodity: [6,5,4],
							empty: [5,4,1],
						},
						{
							name: 'Nowy lubosz',
							short: 'NLB',
							commodity: [8,9,5],
							empty: [5,6,3],
						},
						{
							name: 'Sierakowo',
							short: 'SRK',
							commodity: [6,5,8],
							empty: [5,8,7],
						},
						{
							name: 'Kiełczewo',
							short: 'KŁC',
							commodity: [8,7,5],
							empty: [5,4,0],
						},
						{
							name: 'Stare oborzyska',
							short: 'STR',
							commodity: [[6,5],[7,7],5],
							empty: [4,4,1],
						},
						{
							name: 'Czempiń 2',
							short: 'CZ2',
							commodity: [8,9,6],
							empty: [5,5,6],
						},
						{
							name: 'Czempiń 1',
							short: 'CZ1',
							commodity: [8,9,8],
							empty: [7,8,5],
						},
						{
							name: 'Turew',
							short: 'TUR',
							commodity: [4,6,3],
							empty: [3,4,4],
						},
						{
							name: 'Racot',
							short: 'RAC',
							commodity: [4,4,2],
							empty: [5,10,3],
						},
					],
				},
				{
					name: 'Dolsk',
					required: 1076,
					dam: 2,
					shops:
					[
						{
							name: 'Wilkowice',
							short: 'WLK',
							commodity: [5,6,4],
							empty: [2,9,3],
						},
						{
							name: 'Lipno',
							short: 'LIP',
							commodity: [9,9,6],
							empty: [10,8,5],
						},
						{
							name: 'Osieczna',
							short: 'OSI',
							commodity: [8,10,6],
							empty: [7,7,5],
						},
						{
							name: 'Świerczyna',
							short: 'ŚWR',
							commodity: [6,6,5],
							empty: [5,5,4],
						},
						{
							name: 'Krzywiń',
							short: 'KRZ',
							commodity: [[8,6],[8,4],10],
							empty: [[7,6],[6,5],[7,4]],
						},
						{
							name: 'Jerka',
							short: 'JER',
							commodity: [[6,7],[7,6],7],
							empty: [[9,5],[7,7],6],
						},
						{
							name: 'Bieżyń',
							short: 'BŻŃ',
							commodity: [8,7,6],
							empty: [7,6,7],
						},
						{
							name: 'Bielewo',
							short: 'BLW',
							commodity: [7,7,6],
							empty: [8,8,5],
						},
						{
							name: 'Kunowo',
							short: 'KUN',
							commodity: [5,5,3],
							empty: [6,4,2],
						},
						{
							name: 'Dolsk',
							short: 'DLS',
							commodity: [[7,4],[6,5],5],
							empty: [10,8,6],
						},
						{
							name: 'Gostyń 2',
							short: 'GS2',
							commodity: [9,[5,6],7],
							empty: [10,[8,4],6],
						},
						{
							name: 'Gostyń 1',
							short: 'GS1',
							commodity: [7,8,4],
							empty: [8,7,3],
						},
					],
				},
				{
					name: 'Krobia',
					required: 1164,
					dam: 2,
					shops:
					[
						{
							name: 'Poniec 2',
							short: 'PN2',
							commodity: [[7,4],[8,6],6],
							empty: [10,[7,6],5],
						},
						{
							name: 'Poniec 1',
							short: 'PN1',
							commodity: [8,7,6],
							empty: [7,8,7],
						},
						{
							name: 'Pudliszki',
							short: 'PUD',
							commodity: [7,9,6],
							empty: [4,10,9],
						},
						{
							name: 'Krobia wlkp 1',
							short: 'KR1',
							commodity: [[7,8],[6,5],6],
							empty: [[8,6],[7,5],7],
						},
						{
							name: 'Krobia wlkp 2',
							short: 'KR2',
							commodity: [[8,5],[6,6],10],
							empty: [[7,5],[6,7],[7,6]],
						},
						{
							name: 'Pępowo 2',
							short: 'PP2',
							commodity: [9,8,6],
							empty: [8,9,7],
						},
						{
							name: 'Pępowo 1',
							short: 'PP1',
							commodity: [[7,5],10,7],
							empty: [[6,5],[6,5],6],
						},
						{
							name: 'Skoraszewice',
							short: 'SKR',
							commodity: [4,4,2],
							empty: [5,2,2],
						},
						{
							name: 'Niepart',
							short: 'NPR',
							commodity: [6,6,4],
							empty: [9,5,5],
						},
						{
							name: 'Konary',
							short: 'KNR',
							commodity: [6,7,4],
							empty: [5,6,3],
						},
						{
							name: 'Miejska górka',
							short: 'MG',
							commodity: [[8,6],[9,5],7],
							empty: [[7,4],[8,7],10],
						},
						{
							name: 'Sarnowa',
							short: 'SAR',
							commodity: [5,7,5],
							empty: [6,10,4],
						},
					],
				},
				{
					name: 'Przemęt',
					required: 1322,
					dam: 2,
					shops:
					[
						{
							name: 'Święciechowa',
							short: 'ŚW',
							commodity: [5,6,4],
							empty: [6,9,3],
						},
						{
							name: 'Krzycko wielkie',
							short: 'KRZ',
							commodity: [7,[6,5],5],
							empty: [10,[8,4],8],
						},
						{
							name: 'Bukówiec górny',
							short: 'BUK',
							commodity: [7,[6,5],7],
							empty: [10,[9,5],6],
						},
						{
							name: 'Włoszakowice 1',
							short: 'WŁ1',
							commodity: [[6,6],[8,4],6],
							empty: [[8,5],[8,5],7],
						},
						{
							name: 'Włoszakowice 2',
							short: 'WŁ2',
							commodity: [7,9,6],
							empty: [8,[6,6],7],
						},
						{
							name: 'Boszkowo',
							short: 'BSZ',
							commodity: [5,4,6],
							empty: [6,5,5],
						},
						{
							name: 'Bucz',
							short: 'BCZ',
							commodity: [7,7,6],
							empty: [6,6,7],
						},
						{
							name: 'Przemęt',
							short: 'PMT',
							commodity: [[7,6],[8,4],9],
							empty: [[6,6],[7,6],10],
						},
						{
							name: 'Śmigiel 1',
							short: 'Ś1',
							commodity: [10,[6,5],6],
							empty: [9,[7,5],7],
						},
						{
							name: 'Śmigiel 2',
							short: 'Ś2',
							commodity: [10,[7,4],6],
							empty: [9,[8,6],3],
						},
						{
							name: 'Nowa wieś',
							short: 'NW',
							commodity: [9,[7,5],8],
							empty: [[6,6],[6,5],7],
						},
						{
							name: 'Wilkowo polskie',
							short: 'WLK',
							commodity: [9,10,7],
							empty: [8,9,6],
						},
						{
							name: 'Stare bojanowo',
							short: 'BOJ',
							commodity: [9,9,6],
							empty: [10,10,9],
						},
					],
				},
				{
					name: 'Oborniki',
					required: 1262,
					dam: 2,
					shops:
					[
						{
							name: 'Oborniki śląskie 1',
							short: 'O1',
							commodity: [6,8,4],
							empty: [7,9,3],
						},
						{
							name: 'Oborniki śląskie 3',
							short: 'O3',
							commodity: [[7,6],[7,7],8],
							empty: [[8,6],[8,7],9],
						},
						{
							name: 'Oborniki śląskie 2',
							short: 'O2',
							commodity: [[6,5],[6,7],[7,4]],
							empty: [8,[7,7],8],
						},
						{
							name: 'Trzebnica 1',
							short: 'TB1',
							commodity: [9,[8,4],7],
							empty: [[7,5],[6,7],6],
						},
						{
							name: 'Trzebnica 2',
							short: 'TB2',
							commodity: [[9,8],[8,5,7],[7,4]],
							empty: [[9,7],[9,8],[6,6]],
						},
						{
							name: 'Zawonia 1',
							short: 'ZW1',
							commodity: [9,[8,4],8],
							empty: [[8,4],[7,4],5],
						},
						{
							name: 'Zawonia 2',
							short: 'ZW2',
							commodity: [[7,5],[6,5],7],
							empty: [9,[8,4],6],
						},
						{
							name: 'Bukowice',
							short: 'BUK',
							commodity: [9,[6,5],8],
							empty: [6,8,5],
						},
						{
							name: 'Sułów 2',
							short: 'SŁ2',
							commodity: [7,8,7],
							empty: [10,7,8],
						},
						{
							name: 'Sułów 1',
							short: 'SŁ1',
							commodity: [9,8,9],
							empty: [10,5,8],
						},
						{
							name: 'Szkaradowo',
							short: 'SZK',
							commodity: [9,8,5],
							empty: [[6,6],7,6],
						},
					],
				},
				{
					name: 'Krośnice',
					required: 1274,
					dam: 2,
					shops:
					[
						{
							name: 'Dobroszyce',
							short: 'DOB',
							commodity: [[6,7],[8,7],8],
							empty: [10,[8,4],[6,5]],
						},
						{
							name: 'Oleśnica',
							short: 'OLE',
							commodity: [4,4,2],
							empty: [2,5,3],
						},
						{
							name: 'Ligota wielka',
							short: 'LGT',
							commodity: [9,[7,4],5],
							empty: [6,8,6],
						},
						{
							name: 'Zbytowa',
							short: 'ZBT',
							commodity: [3,3,2],
							empty: [2,2,3],
						},
						{
							name: 'Twardogóra',
							short: 'TWG',
							commodity: [[6,5],10,7],
							empty: [10,7,6],
						},
						{
							name: 'Moszyce',
							short: 'MSZ',
							commodity: [[7,5],[7,5],8],
							empty: [[6,7,10],[6,5,10],10],
						},
						{
							name: 'Goszcz',
							short: 'GSZ',
							commodity: [[9,5],[8,7],8],
							empty: [[8,7],[8,6],9],
						},
						{
							name: 'Krośnice',
							short: 'KRŚ',
							commodity: [[9,7],[9,7],10],
							empty: [[9,8],[8,7],9],
						},
						{
							name: 'Milicz 2',
							short: 'M2',
							commodity: [[6,6],[8,8],[8,5]],
							empty: [[6,5],[10,8],[8,6]],
						},
						{
							name: 'Milicz 3',
							short: 'M3',
							commodity: [10,[5,6],7],
							empty: [[6,5],[7,5],6],
						},
						{
							name: 'Milicz 1',
							short: 'M1',
							commodity: [[7,7],[8,6],9],
							empty: [[5,6],[8,9],[8,4]],
						},
					],
				},
				{
					name: 'Sława',
					required: 1316,
					dam: 2,
					shops:
					[
						{
							name: 'Szlichtyngowa',
							short: 'SZL',
							commodity: [9,[6,5],7],
							empty: [8,10,6],
						},
						{
							name: 'Jędrzychowice',
							short: 'JĘD',
							commodity: [4,5,3],
							empty: [5,4,6],
						},
						{
							name: 'Wschowa 3',
							short: 'W3',
							commodity: [[5,6],[7,7],10],
							empty: [[8,4],[7,6],[6,5]],
						},
						{
							name: 'Wschowa 1',
							short: 'W1',
							commodity: [6,6,6],
							empty: [5,5,7],
						},
						{
							name: 'Wschowa 2',
							short: 'W2',
							commodity: [[6,5],[6,5],7],
							empty: [10,[6,6],8],
						},
						{
							name: 'Wschowa 4',
							short: 'W4',
							commodity: [8,8,5],
							empty: [7,5,4],
						},
						{
							name: 'Wijewo',
							short: 'WIJ',
							commodity: [9,6,7],
							empty: [10,7,4],
						},
						{
							name: 'Brenno 1',
							short: 'BRN',
							commodity: [9,6,5],
							empty: [8,7,8],
						},
						{
							name: 'Sława 2',
							short: 'SŁ2',
							commodity: [[9,8],[9,8],[6,5]],
							empty: [[9,7],[10,8],10],
						},
						{
							name: 'Sława 1',
							short: 'SŁ1',
							commodity: [[6,7],[10,8],[7,6]],
							empty: [[7,8,10],[9,10,10],[9,10]],
						},
						{
							name: 'Krzepielów',
							short: 'KPL',
							commodity: [7,10,5],
							empty: [6,[6,5],4],
						},
						{
							name: 'Kotla',
							short: 'KOT',
							commodity: [[7,5],[7,6],10],
							empty: [[7,6],[7,7],9],
						},
					],
				},
			],
			[
				{
					name: 'Wrocław',
					required: 760,
					dam: 2,
					shops:
					[
						{
							name: 'Wydawy',
							short: 'WYD',
							commodity: [9,7,5],
							empty: [8,8,6],
						},
						{
							name: 'Wrocław 7',
							short: 'WR7',
							commodity: [6,4,5],
							empty: [5,3,4],
						},
						{
							name: 'Wrocław 13',
							short: 'W13',
							commodity: [7,7,4],
							empty: [10,6,5],
						},
						{
							name: 'Wrocław 15',
							short: 'W15',
							commodity: [[6,7],[7,7],8],
							empty: [[6,6],[7,8],7],
						},
						{
							name: 'Wrocław 1',
							short: 'WR1',
							commodity: [9,9,5],
							empty: [6,6,6],
						},
						{
							name: 'Wrocław 3',
							short: 'WR3',
							commodity: [[6,5],8,4],
							empty: [8,7,7],
						},
						{
							name: 'Wrocław 2',
							short: 'WR2',
							commodity: [10,[7,5],7],
							empty: [[6,5],9,8],
						},
					],
				},
				{
					name: 'Leszna',
					required: 970,
					dam: 2,
					shops:
					[
						{
							name: 'Dąbcze',
							short: 'DĄB',
							commodity: [5,7,4],
							empty: [4,10,2],
						},
						{
							name: 'Leszno 7',
							short: 'L7',
							commodity: [9,[7,5],7],
							empty: [8,[7,6],6],
						},
						{
							name: 'Strzyżewice 1',
							short: 'STR',
							commodity: [6,6,4],
							empty: [5,3,5],
						},
						{
							name: 'Leszno 4',
							short: 'L4',
							commodity: [5,6,4],
							empty: [6,7,5],
						},
						{
							name: 'Leszno 5',
							short: 'L5',
							commodity: [8,7,3],
							empty: [9,6,4],
						},
						{
							name: 'Leszno 1',
							short: 'L1',
							commodity: [5,6,3],
							empty: [8,9,4],
						},
						{
							name: 'Leszno 10',
							short: 'L10',
							commodity: [2,4,3],
							empty: [3,7,6],
						},
						{
							name: 'Leszno 8',
							short: 'L8',
							commodity: [5,7,4],
							empty: [6,10,2],
						},
						{
							name: 'Leszno 6',
							short: 'L6',
							commodity: [4,5,3],
							empty: [5,6,2],
						},
						{
							name: 'Leszno 3',
							short: 'L3',
							commodity: [10,6,4],
							empty: [9,5,5],
						},
						{
							name: 'Leszno 9',
							short: 'L9',
							commodity: [8,8,9],
							empty: [9,7,10],
						},
						{
							name: 'Leszno 2',
							short: 'L2',
							commodity: [5,8,7],
							empty: [6,9,8],
						},
					],
				},
				{
					name: 'Ostrowy',
					required: 842,
					dam: 2,
					shops:
					[
						{
							name: 'Lamki',
							short: 'Lam',
							commodity: [7,8,4],
							empty: [10,[6,5],2],
						},
						{
							name: 'Ostrów 7',
							short: 'O7',
							commodity: [9,9,6],
							empty: [6,10,9],
						},
						{
							name: 'Ostrów 4',
							short: 'O4',
							commodity: [9,10,6],
							empty: [10,9,5],
						},
						{
							name: 'Ostrów 12',
							short: 'O12',
							commodity: [10,[8,4],8],
							empty: [9,[6,5],[5,6]],
						},
						{
							name: 'Ostrów 9',
							short: 'O9',
							commodity: [[5,6],[7,5],7],
							empty: [10,[8,7],8],
						},
						{
							name: 'Ostrów 11',
							short: 'O11',
							commodity: [10,9,6],
							empty: [[6,7],10,5],
						},
						{
							name: 'Ostrów 1',
							short: 'O1',
							commodity: [5,4,4],
							empty: [2,2,3],
						},
						{
							name: 'Ostrów 14',
							short: 'O14',
							commodity: [7,8,5],
							empty: [8,5,6],
						},
						{
							name: 'Ostrów 5',
							short: 'O5',
							commodity: [7,8,6],
							empty: [8,9,7],
						},
					],
				},
				{
					name: 'Września',
					required: 850,
					dam: 2,
					shops:
					[
						{
							name: 'Gułtowy',
							short: 'GŁT',
							commodity: [6,[6,5],5],
							empty: [5,[8,6],2],
						},
						{
							name: 'Nekla',
							short: 'NKL',
							commodity: [[6,5],8,7],
							empty: [10,5,6],
						},
						{
							name: 'Przyborki',
							short: 'PBI',
							commodity: [6,[5,6],5],
							empty: [5,10,4],
						},
						{
							name: 'Psary polskie',
							short: 'PSR',
							commodity: [5,7,4],
							empty: [2,8,3],
						},
						{
							name: 'Sokołowo',
							short: 'SKŁ',
							commodity: [8,9,7],
							empty: [7,8,6],
						},
						{
							name: 'Gutowo małe',
							short: 'GUT',
							commodity: [5,6,4],
							empty: [4,3,3],
						},
						{
							name: 'Września 1',
							short: 'W1',
							commodity: [5,6,6],
							empty: [2,5,5],
						},
						{
							name: 'Września 2',
							short: 'W2',
							commodity: [6,8,7],
							empty: [5,9,6],
						},
						{
							name: 'Września 3',
							short: 'W3',
							commodity: [5,6,3],
							empty: [6,3,2],
						},
						{
							name: 'Bierzglinek 1',
							short: 'BGL',
							commodity: [5,7,5],
							empty: [4,8,6],
						},
						{
							name: 'Miłosław',
							short: 'MŁS',
							commodity: [[6,5],[8,5],8],
							empty: [[8,6],[8,4],7],
						},
					],
				},
				{
					name: 'Krotoszyny',
					required: 1058,
					dam: 2,
					shops:
					[
						{
							name: 'Krotoszyn 5',
							short: 'K5',
							commodity: [10,[6,6],6],
							empty: [[6,5],[6,7],5],
						},
						{
							name: 'Krotoszyn 2',
							short: 'K2',
							commodity: [2,6,2],
							empty: [2,5,2],
						},
						{
							name: 'Krotoszyn 8',
							short: 'K8',
							commodity: [8,9,4],
							empty: [7,8,5],
						},
						{
							name: 'Krotoszyn 3',
							short: 'K3',
							commodity: [9,[6,5],[7,4]],
							empty: [10,[6,6],10],
						},
						{
							name: 'Krotoszyn 4',
							short: 'K4',
							commodity: [7,6,3],
							empty: [10,7,2],
						},
						{
							name: 'Krotoszyn 7',
							short: 'K7',
							commodity: [10,9,8],
							empty: [9,10,9],
						},
						{
							name: 'Krotoszyn 6',
							short: 'K6',
							commodity: [5,5,3],
							empty: [2,4,2],
						},
						{
							name: 'Krotoszyn 11',
							short: 'K11',
							commodity: [9,10,5],
							empty: [10,[6,5],4],
						},
						{
							name: 'Krotoszyn 1',
							short: 'K1',
							commodity: [7,9,4],
							empty: [4,8,5],
						},
						{
							name: 'Krotoszyn 9',
							short: 'K9',
							commodity: [6,9,6],
							empty: [5,8,7],
						},
						{
							name: 'Konarzew',
							short: 'KON',
							commodity: [9,7,7],
							empty: [6,6,8],
						},
						{
							name: 'Zduny 2',
							short: 'ZD2',
							commodity: [5,6,3],
							empty: [2,7,2],
						},
						{
							name: 'Zduny 1',
							short: 'ZD1',
							commodity: [9,8,6],
							empty: [8,7,5],
						},
					],
				},
				{
					name: 'Bnin',
					required: 1130,
					dam: 2,
					shops:
					[
						{
							name: 'Bnin',
							short: 'BNN',
							commodity: [[7,5],[7,6],10],
							empty: [9,8,5],
						},
						{
							name: 'Środa wlkp. 2',
							short: 'ŚR2',
							commodity: [[7,5],[7,5],9],
							empty: [4,4,4],
						},
						{
							name: 'Dominowo',
							short: 'DOM',
							commodity: [5,6,4],
							empty: [5,4,3],
						},
						{
							name: 'Środa wlkp. 1',
							short: 'ŚR1',
							commodity: [10,[6,5],7],
							empty: [5,5,4],
						},
						{
							name: 'Murzynowo leśne 1',
							short: 'MRZ',
							commodity: [8,[6,7],6],
							empty: [3,3,0],
						},
						{
							name: 'Sulęcinek',
							short: 'SUL',
							commodity: [10,9,6],
							empty: [4,5,2],
						},
						{
							name: 'Orzechowo',
							short: 'ORZ',
							commodity: [10,10,7],
							empty: [7,7,4],
						},
						{
							name: 'Nowe miasto nad wartą',
							short: 'NM',
							commodity: [7,8,5],
							empty: [6,7,4],
						},
						{
							name: 'Klęka',
							short: 'KLK',
							commodity: [6,6,7],
							empty: [5,5,6],
						},
						{
							name: 'Mieszków',
							short: 'MSZ',
							commodity: [9,[6,7],6],
							empty: [8,[6,6],7],
						},
						{
							name: 'Cielcza',
							short: 'CIE',
							commodity: [10,8,7],
							empty: [[6,5],7,8],
						},
					],
				},
				{
					name: 'Góry',
					required: 1200,
					dam: 2,
					shops:
					[
						{
							name: 'Kłoda',
							short: 'KŁ',
							commodity: [2,5,4],
							empty: [5,4,3],
						},
						{
							name: 'Rydzyna',
							short: 'RDZ',
							commodity: [9,9,5],
							empty: [6,8,6],
						},
						{
							name: 'Bojanowo',
							short: 'BOJ',
							commodity: [[8,5],[8,4],10],
							empty: [[9,5],[6,5],9],
						},
						{
							name: 'Golina wielka',
							short: 'GOL',
							commodity: [8,10,5],
							empty: [7,9,6],
						},
						{
							name: 'Czernina',
							short: 'CZR',
							commodity: [6,8,5],
							empty: [5,9,6],
						},
						{
							name: 'Witoszyce',
							short: 'WIT',
							commodity: [9,[6,5],7],
							empty: [8,[8,6],8],
						},
						{
							name: 'Góra 4',
							short: 'G4',
							commodity: [7,8,7],
							empty: [8,[5,6],4],
						},
						{
							name: 'Góra 1',
							short: 'G1',
							commodity: [10,[7,5],7],
							empty: [[7,4],[5,6],4],
						},
						{
							name: 'Góra 3',
							short: '',
							commodity: [10,[6,5],6],
							empty: [9,[9,5],9],
						},
						{
							name: 'Góra 5',
							short: 'G5',
							commodity: [9,9,7],
							empty: [10,[8,4],6],
						},
						{
							name: 'Góra 2',
							short: 'G2',
							commodity: [7,[7,5],5],
							empty: [6,[7,6],6],
						},
						{
							name: 'Niechlów',
							short: 'NCH',
							commodity: [[8,4],[7,4],8],
							empty: [[6,5],[8,6],7],
						},
					],
				},
				{
					name: 'Odolanów',
					required: 1246,
					dam: 2,
					shops:
					[
						{
							name: 'Cieszków 1',
							short: 'C1',
							commodity: [8,9,4],
							empty: [5,8,3],
						},
						{
							name: 'Cieszków 2',
							short: 'C2',
							commodity: [8,6,5],
							empty: [9,9,4],
						},
						{
							name: 'Sulmierzyce 2',
							short: 'SL2',
							commodity: [6,6,4],
							empty: [5,3,5],
						},
						{
							name: 'Sulmierzyce 1',
							short: 'SL1',
							commodity: [7,8,5],
							empty: [10,9,4],
						},
						{
							name: 'Raczyce',
							short: 'RCZ',
							commodity: [[7,6],[7,6],10],
							empty: [[8,6],[8,4],[6,5]],
						},
						{
							name: 'Odolanów 1',
							short: 'O1',
							commodity: [[8,7],[8,6],8],
							empty: [[7,7],[7,8],9],
						},
						{
							name: 'Granowiec',
							short: 'GRN',
							commodity: [10,[7,4],10],
							empty: [[6,5],[8,6],7],
						},
						{
							name: 'Sośnie',
							short: 'SOŚ',
							commodity: [[7,4],[7,8],8],
							empty: [10,[9,7],[5,6]],
						},
						{
							name: 'Czarnylas',
							short: 'CZL',
							commodity: [10,8,6],
							empty: [9,7,5],
						},
						{
							name: 'Odolanów 2',
							short: 'O2',
							commodity: [[10,6],[10,6],[6,5]],
							empty: [[9,6],[10,9],[6,6]],
						},
						{
							name: 'Tarchały wielkie',
							short: 'TAR',
							commodity: [[6,5],9,7],
							empty: [[7,5],10,8],
						},
					],
				},
				{
					name: 'Gizałki',
					required: 1314,
					dam: 2,
					shops:
					[
						{
							name: 'Witaszyce 2',
							short: 'WIT',
							commodity: [[6,5],8,5],
							empty: [10,7,6],
						},
						{
							name: 'Jarocin 1',
							short: 'J1',
							commodity: [5,6,4],
							empty: [6,7,3],
						},
						{
							name: 'Jarocin 6',
							short: 'J6',
							commodity: [8,9,5],
							empty: [7,8,4],
						},
						{
							name: 'Jarocin 2',
							short: 'J2',
							commodity: [[6,5],10,4],
							empty: [[7,5],7,3],
						},
						{
							name: 'Jarocin 3',
							short: 'J3',
							commodity: [8,6,4],
							empty: [7,7,5],
						},
						{
							name: 'Dobieszczyzna',
							short: 'DBS',
							commodity: [6,8,6],
							empty: [7,9,7],
						},
						{
							name: 'Gizałki 2',
							short: 'GIZ',
							commodity: [[7,4],[7,5],7],
							empty: [[8,6],[7,4],6],
						},
						{
							name: 'Czermin',
							short: 'CZR',
							commodity: [[7,5],[5,6],6],
							empty: [[7,6],[8,4],7],
						},
						{
							name: 'Broniszewice',
							short: 'BRO',
							commodity: [7,9,8],
							empty: [8,10,9],
						},
						{
							name: 'Chocz',
							short: 'HCZ',
							commodity: [[6,6],[7,6],7],
							empty: [[6,5],[8,4],6],
						},
						{
							name: 'Janków drugi',
							short: 'JAN',
							commodity: [[8,8],[7,8],[7,5]],
							empty: [[8,7],[6,6],[7,6]],
						},
						{
							name: 'Gołuchów',
							short: 'GOŁ',
							commodity: [[10,7],[10,7],10],
							empty: [[9,8],[8,4,8],[7,6]],
						},
					],
				},
				{
					name: 'Żmigrody',
					required: 1302,
					dam: 2,
					shops:
					[
						{
							name: 'Chobienia',
							short: 'CHB',
							commodity: [6,7,4],
							empty: [7,6,7],
						},
						{
							name: 'Jemielno',
							short: 'JEM',
							commodity: [8,9,4],
							empty: [7,10,5],
						},
						{
							name: 'Wińsko',
							short: 'WIŃ',
							commodity: [[9,7],[10,6],[5,6]],
							empty: [[8,7],[9,8],10],
						},
						{
							name: 'Pełczyn',
							short: 'PEŁ',
							commodity: [7,9,10],
							empty: [6,10,[8,5]],
						},
						{
							name: 'Skokowa',
							short: 'CKK',
							commodity: [[7,4],[8,7],10],
							empty: [10,[8,6],[6,7]],
						},
						{
							name: 'Prusice',
							short: 'PRC',
							commodity: [[8,4],[8,8],9],
							empty: [[6,7],[8,7],8],
						},
						{
							name: 'Żmigród 1',
							short: 'Ż1',
							commodity: [[7,4],[6,6],7],
							empty: [8,[6,7],8],
						},
						{
							name: 'Żmigród 2',
							short: 'Ż2',
							commodity: [[8,4],[7,7],8],
							empty: [[9,9],[7,8,7],10],
						},
						{
							name: 'Korzeńsko',
							short: 'KRZ',
							commodity: [9,8,6],
							empty: [8,9,5],
						},
						{
							name: 'Folwark',
							short: 'FOL',
							commodity: [6,7,4],
							empty: [7,10,5],
						},
						{
							name: 'Wąsosz',
							short: 'WĄS',
							commodity: [[9,6],[8,6],9],
							empty: [[9,7],[9,8],6],
						},
					],
				},
				{
					name: 'Gostyń',
					required: 1404,
					dam: 2,
					shops:
					[
						{
							name: 'Pawłowice',
							short: 'PAW',
							commodity: [10,9,6],
							empty: [[7,4],8,7],
						},
						{
							name: 'Kąkolewo',
							short: 'KĄK',
							commodity: [[6,5],[6,5],6],
							empty: [[6,6],[7,5],5],
						},
						{
							name: 'Krzemieniewo',
							short: 'KMN',
							commodity: [[7,5],[8,6],8],
							empty: [[6,5],[8,7],5],
						},
						{
							name: 'Gola',
							short: 'GOL',
							commodity: [9,7,10],
							empty: [8,8,7],
						},
						{
							name: 'Gostyń 4',
							short: 'G4',
							commodity: [10,[7,6],8],
							empty: [[7,6,9],[9,7,10],[6,7]],
						},
						{
							name: 'Gostyń 3',
							short: 'G3',
							commodity: [[5,6],[7,6],8],
							empty: [10,[6,6],9],
						},
						{
							name: 'Bodzewo',
							short: 'BOD',
							commodity: [8,8,9],
							empty: [9,[6,5],10],
						},
						{
							name: 'Piaski',
							short: 'PSK',
							commodity: [7,9,6],
							empty: [6,6,5],
						},
						{
							name: 'Jaraczewo',
							short: 'JAR',
							commodity: [[6,5],10,4],
							empty: [10,9,5],
						},
						{
							name: 'Chwałkowo kościelne',
							short: 'HWŁ',
							commodity: [4,4,2],
							empty: [3,3,2],
						},
						{
							name: 'Książ wlkp 1',
							short: 'KS1',
							commodity: [7,[6,5],5],
							empty: [8,8,4],
						},
						{
							name: 'Książ wlkp 2',
							short: 'KS2',
							commodity: [[9,8],[8,9],10],
							empty: [[10,8],[9,9],[8,5]],
						},
						{
							name: 'Chocicza',
							short: 'HOC',
							commodity: [8,[6,5],8],
							empty: [7,10,9],
						},
					],
				},
			]
		],
		colors:
		{
			chicken: 0,
			meat: 50,
			smoke: 220,
			dam: 80,
		},
		close: function(event)
		{
			const parent = event.target.parentElement;
			parent.classList.add('hidden');
		}
	}
	const results = JSON.parse(localStorage.getItem('agro-tetris: results')||'[]')
	let situation = {};
	const el = {};
	const click =
	{
		publisher: function()
		{
			const list = situation.places[0][0]
			if (!hand.value())
			{
				if (list.length > 0)
				{
					hand.add(list.pop())
				}
				if (situation.commodity.length > 0)
				{
					const nr = Math.floor(Math.random()*situation.commodity.length)
					const chest = situation.commodity.splice(nr,1)[0]
					list.push(chest)
				}
				else if (situation.dam > 0)
				{
					list.push({content:false,type:'dam',value:10})
					showTutorial('Zielony klocek to tyczka. Tyczka nie może się przewrócić. Użyj jej do zabezpieczenia towaru.',4)
					situation.dam--
				}
			}
			refreshBox(list,el.places[0][0])
		},
		box: async function(event)
		{
			const chestIndex = (Number(event.target.dataset.index)||0)
			const t = event.currentTarget
			const element = el[t.dataset.place][Number(t.dataset.type)][Number(t.dataset.nr)]
			const list = situation[t.dataset.place][Number(t.dataset.type)][Number(t.dataset.nr)]
			const maxValue = {cubby:3,car:10,places:9}[t.dataset.place]
			//
			situation.click++
			await new Promise(resolve => setTimeout(resolve, 200));
			let double = false
			if (situation.click < 1)
			{
				return
			}
			if (situation.click == 2)
			{
				double = true
			}
			situation.click = 0
			//
			if (chestIndex)
			{
				if (double)
				{
					if (hand.disconnect(list,chestIndex-1,element))
					{
						(situation.moves||[])[situation.place] += 1
						return
					}
				}
				else if (hand.connect(list,chestIndex-1,element))
				{
					(situation.moves||[])[situation.place] += 2
					return
				}
			}
			if (list.length < maxValue)
			{
				if (hand.value())
				{
					if (hand.value().value < 10)
					{
						showTutorial('Towar musisz ustawiać tak żeby nie było dużych różnic wysokości.',2)
					}
					else
					{
						showTutorial('Do góry po prawej jest przycisk pokazujacy rozpiskę trasy. Przyda się żeby dobrze ułożyć towar.',3)
					}
					if (hand.value().content)
					{
						(situation.moves||[])[situation.place] += 4
					}
					else
					{
						(situation.moves||[])[situation.place] += 3
					}
					list.push(hand.grab())
					refreshBox(list,element)
				}
				else
				{
					hand.add(list.pop())
					refreshBox(list,element)
				}
			}
			else
			{
				if (!hand.value())
				{
					hand.add(list.pop())
					refreshBox(list,element)
					showTutorial('Ruchy liczą się inaczej dla pustych i pełnych klocków. Przesunięcie pełnego klocka dodaje 4 do liczby ruchów',8)
				}
				else
				{
					showTutorial('Pola mają ograniczoną pojemność. Towar można z nich wyciągać w kolejności odwrotnej niż był wkładany.',9)
				}
			}
		},
	}
	function next()
	{
		if (hand.value())
		{
			return info('Żeby przejść dalej musisz upuścić trzymany klocek.')
		}
		for (let i=1 ; i<situation.cubby[0].length ; i++)
		{
			if (situation.cubby[0][i].length > 0)
			{
				return info('Nie możesz przejść dalej jeżeli masz klocki w schowku.')
			}
		}
		for (let r=1 ; r<situation.car[0].length ; r++)
		{
			for (let i=0 ; i<situation.car[0][r].length ; i++)
			{
				const chest = ((situation.car[0][r]||[])[i]||{})
				if ((chest.value||0) > 0 && chest.type != 'dam')
				{
					if (i > 0)
					{
						const neighbor = ((situation.car[0][r]||[])[(i-1)]||{})
						if ((neighbor.value||0)+4 < chest.value||0)
						{
							if (chest.short)
							{
								return info(`Słupek klocków (${{chicken:'Czerwone',meat:'Żółte',smoke:'Niebieskie'}[chest.type]||''} ${chest.short}) na samochodzie nie ma podparcia z przodu.`)
							}
							else
							{
								return info(`Słupek klocków (${{chicken:'Czerwone',meat:'Żółte',smoke:'Niebieskie'}[chest.type]||''} ${chest.value}) na samochodzie nie ma podparcia z przodu.`)
							}
						}
					}
					if (r > 1)
					{
						const neighbor = ((situation.car[0][r-1]||[])[i]||{})
						if ((neighbor.value||0)+3 < chest.value||0)
						{
							if (neighbor.value > 0)
							{
								if (chest.short)
								{
									return info(`Na samochodzie są różnice w wysokości klocków większe niż 3.<br>(${{chicken:'Czerwone',meat:'Żółte',smoke:'Niebieskie'}[chest.type]||''} ${chest.short})`)
								}
								else
								{
									return info(`Na samochodzie są różnice w wysokości klocków większe niż 3.<br>(${{chicken:'Czerwone',meat:'Żółte',smoke:'Niebieskie'}[chest.type]||''} ${chest.value})`)
								}
							}
							else
							{
								return info(`Towar nie jest zabezpieczony.`)
							}
						}
					}
					if (r < 6)
					{
						const neighbor = ((situation.car[0][r+1]||[])[i]||{})
						if ((neighbor.value||0)+3 < chest.value||0)
						{
							if (neighbor.value > 0)
							{
								if (chest.short)
								{
									return info(`Na samochodzie są różnice w wysokości klocków większe niż 3.<br>(${{chicken:'Czerwone',meat:'Żółte',smoke:'Niebieskie'}[chest.type]||''} ${chest.short})`)
								}
								else
								{
									return info(`Na samochodzie są różnice w wysokości klocków większe niż 3.<br>(${{chicken:'Czerwone',meat:'Żółte',smoke:'Niebieskie'}[chest.type]||''} ${chest.value})`)
								}
							}
							else
							{
								return info(`Towar nie jest zabezpieczony.`)
							}
						}
					}
				}
			}
		}
		if (situation.place === 0)
		{
			if (situation.commodity.length > 0)
			{
				return info('Żeby zakończyć załadunek musisz załadować wszystkie klocki.')
			}
		}
		else
		{
			for (let r=0 ; r<2 ; r++)
			{
				const boxes = situation.places[situation.place][r]
				for (let i=0 ; i<boxes.length ; i++)
				{
					if (!boxes[i].content)
					{
						return info('Żeby przejść dalej zabierz puste klocki.')
					}
					if (boxes[i].shop != situation.namePlaces[situation.place].name)
					{
						return info('Zostawiłeś niewłaściwe klocki!')
					}
				}
			}
			for (let r=1 ; r<situation.car[0].length ; r++)
			{
				for (let i=0 ; i<situation.car[0][r].length ; i++)
				{
					const chest = ((situation.car[0][r]||[])[i]||{})
					if (chest.shop === situation.namePlaces[situation.place].name)
					{
						return info('Nie zostawiłeś całego towaru!')
					}
				}
			}
		}
		if (situation.places[situation.place+1])
		{
			situation.time[situation.place][1] = Date.now()
			situation.place++
			for (let i=0 ; i<el.placeName.children.length ; i++)
			{
				const element = el.placeName.children[i]
				if (i === situation.place)
				{
					element.classList.remove('hidden')
				}
				else
				{
					element.classList.add('hidden')
				}
			}
			for (let i=0 ; i<el.rowPlace.children.length ; i++)
			{
				const element = el.rowPlace.children[i]
				if (i === situation.place)
				{
					element.classList.remove('hidden')
				}
				else
				{
					element.classList.add('hidden')
				}
			}
			curtain.open()
			localStorage.setItem('agro-tetris: situation',JSON.stringify(situation))
		}
		else
		{
			situation.time[situation.place][1] = Date.now()
			finish()
		}
	}
	const hand =
	{
		value: function()
		{
			const giveBack = JSON.parse(JSON.stringify(situation.hand))
			return giveBack
		},
		grab: function()
		{
			const giveBack = JSON.parse(JSON.stringify(situation.hand))
			situation.hand = 0
			hand.refresh()
			return giveBack
		},
		add: function(chestData)
		{
			if (!chestData){return}
			const giveBack = JSON.parse(JSON.stringify(situation.hand))
			if (giveBack)
			{
				return false
			}
			situation.hand = JSON.parse(JSON.stringify(chestData))
			hand.refresh()
			return true
		},
		connect: function(list,index,box)
		{
			const chestData = list[index]
			if (!chestData){return false}
			if (situation.hand.content || chestData.content){return false}
			if (situation.hand.type != chestData.type){return false}
			if (index > list.length-3)
			if (situation.hand.value + chestData.value <= 10)
			{
				chestData.value += situation.hand.value
				situation.hand = 0
			}
			else
			{
				situation.hand.value -= (10-chestData.value)
				chestData.value = 10
			}
			hand.refresh()
			refreshBox(list,box)
			return true
		},
		disconnect: function(list,index,box)
		{
			const chestData = list[index]
			if (!chestData){return false}
			if (situation.hand)
			{
				if (situation.hand.content || chestData.content){return false}
				if (situation.hand.type != chestData.type){return false}
			}
			if (index > list.length-3)
			if (!situation.hand)
			{
				situation.hand = {content:false,type:chestData.type,value:0}
			}
			if (situation.hand.value < 10)
			{
				chestData.value --
				situation.hand.value ++
				if (chestData.value < 1)
				{
					list.splice(index,1)
				}
				hand.refresh()
				refreshBox(list,box)
				return true
			}
			return false
		},
		refresh()
		{
			el.hand.innerHTML = ''
			if (situation.hand)
			{
				const chest = createChest(situation.hand)
				el.hand.appendChild(chest)
			}
		},
		reset: function()
		{
			situation.hand.dataset.chest = '0'
			el.hand.innerHTML = ''
		}
	}
	function createChest(data)
	{
		const chest = document.createElement('div')
		chest.className = 'chest'
		if (data.type === "dam")
		{
			chest.style.background = `#437500`
		}
		else if (data.content)
		{
			chest.style.background = `hsl(${system.colors[data.type]},100%,55%)`
			chest.innerHTML = `<span>${data.short}</span><span>${data.value}</span>`
		}
		else
		{
			chest.style.background = `hsl(${system.colors[data.type]},80%,65%)`
			chest.innerHTML = `<span>${data.value}</span>`
		}
		return chest
	}
	function refreshBox(list,element)
	{
		if (!Array.isArray(list))
		{
			debugger
		}
		element.innerHTML = ''
		for (let i=0 ; i<list.length ; i++)
		{
			const chest = createChest(list[i])
			chest.dataset.index = `${i+1}`
			for (let j=0 ; j<chest.children.length ; j++)
			{
				chest.children[j].dataset.index = `${i+1}`
			}
			element.appendChild(chest)
		}
	}
	function info(text)
	{
		const frame = document.getElementById('error')
		frame.getElementsByClassName('content')[0].innerHTML = text
		frame.classList.remove('hidden')
	}
	const curtain =
	{
		open: function()
		{
			const div = document.getElementById('curtain')
			div.getElementsByTagName('button')[0].onclick = curtain.close
			div.classList.remove('hidden')
		},
		close: function()
		{
			situation.time[situation.place][0] = Date.now()
			const div = document.getElementById('curtain')
			div.classList.add('hidden')
			if (situation.place == 0)
			{
				showTutorial('Na ekranie zobaczysz pakę ciężarówki podzieloną na 6 kolumn. Wyżej są schowki i miejsce wydawania towaru. Towar jest podawany losowo. Ułuż go na pace w odpowiedniej kolejności klikając na miejsce skąd chcesz wziąć klocek a później w miejscu gdzie chcesz go upuścić.',1)
			}
			else if (situation.place == 1)
			{
				showTutorial('Podczas rozładunku musisz zostawić odpowiednie klocki i zabrać puste',5)
			}
			else if (situation.place == 4)
			{
				showTutorial('Puste klocki można łączyć. Kliknij na pusty klocek tego samego rodzaju. Utworzy się bloczek o wysokości 10.',6)
			}
			else if (situation.place == 5)
			{
				showTutorial('Puste klocki można też rozłączyć klikając podwójnie.',7)
			}
		}
	}
	function refreshStatistics()
	{
		const start = ((situation.time||[])[situation.place]||[])[0]||0
		const moves = (situation.moves||[])[situation.place]
		let time = 0
		if (start)
		{
			time = Math.round((Date.now()-start)/1000)
		}
		document.getElementById('statistics').innerHTML = `Czas: ${time||0}s. &nbsp; Ruchy: ${moves||0}`
		setTimeout(refreshStatistics,1000)
	}
	function showRoutes()
	{
		const routes = document.getElementById('routes')
		const content = routes.getElementsByClassName('content')[0]
		routes.classList.remove('hidden')
		content.innerHTML = ''
		for (let i=0 ; i<system.routes.length ; i++)
		{
			const section = document.createElement('section')
			for (let j=0 ; j<system.routes[i].length ; j++)
			{
				const name = system.routes[i][j].name
				const unlocked = ((results[i]||[])[j]||{}).unlocked
				const route = document.createElement('div')
				route.className = 'route'
				if (unlocked || j===0 || unlockedAll)
				{
					const span = document.createElement('span')
					span.innerHTML = name
					route.appendChild(span)
					route.onclick = ()=>{system.newRoutes([i,j])}
				}
				else
				{
					route.innerHTML = `<svg viewBox="0 0 16 16"><path d="M8 1C3 1 3 7 3 7H2v8h12V7h-1s0-6-5-6zm0 2c3 0 3 4 3 4H5s0-4 3-4z" style="fill:black; stroke:none; stroke-width:4"></path>
					</svg>`
				}
				section.appendChild(route)
			}
			content.appendChild(section)
		}
	}
	function showPlan()
	{
		if (!document.getElementById('plan').classList.contains('hidden'))
		{
			document.getElementById('plan').classList.add('hidden')
		}
		else
		{
			const content = document.getElementById('plan').getElementsByClassName('content')[0]
			content.innerHTML = ''
			const data = situation.namePlaces
			if (!data){return}
			const table = document.createElement('table')
			if (true)
			{
				const tr = document.createElement('tr')
				for (let j=0 ; j<6 ; j++)
				{
					const th = document.createElement('th')
					th.innerHTML = ['- Nr -','','--- Sklep ---','- D -','- M -','- W -','- X -'][j]
					tr.appendChild(th)
				}
				table.appendChild(tr)
			}
			for (let i=1 ; i<data.length ; i++)
			{
				const tr = document.createElement('tr')
				for (let j=0 ; j<6 ; j++)
				{
					const td = document.createElement('td')
					if (j === 0)
					{
						td.innerHTML = i
					}
					else
					{
						td.innerHTML = data[i][['short','short','name','chicken','meat','smoke','short'][j]]
					}
					tr.appendChild(td)
				}
				table.appendChild(tr)
			}
			content.appendChild(table)
			document.getElementById('plan').classList.remove('hidden')
		}
	}
	function showTutorial(text,nr)
	{
		if (situation.tutorial[nr]){return}
		situation.tutorial[nr] = true
		if (situation.lvl[0] === 0 && situation.lvl[1] === 0)
		{
			const frame = document.getElementById('tutorial')
			frame.getElementsByClassName('content')[0].innerHTML = text
			frame.classList.remove('hidden')
		}
	}
	function finish()
	{
		const div = document.getElementById('finish')
		const content = div.getElementsByClassName('content')[0]
		content.innerHTML = ''
		const data = []
		const total = [0,0]
		for (let i=0 ;  i<situation.namePlaces.length ; i ++)
		{
			data[i] = {name:situation.namePlaces[i].name}
		}
		for (let i=0 ;  i<situation.time.length ; i ++)
		{
			data[i].time = 0
			if (situation.time[i][0])
			{
				data[i].time = Math.round(((situation.time[i][1]||situation.time[i][0])-situation.time[i][0])/1000)
			}
			total[0] += data[i].time
		}
		for (let i=0 ;  i<situation.moves.length ; i ++)
		{
			data[i].moves = situation.moves[i]
			total[1] += data[i].moves
		}
		const table = document.createElement('table')
		const span = document.createElement('span')
		if (complete())
		{
			span.innerHTML = `Trasa: ${situation.lvlName} ukończona.`
			span.innerHTML += `<br>Efektywność: ${complete()}`
			div.classList.add('complete')
			if (Array.isArray(situation.lvl) && results[situation.lvl[0]])
			{
				results[situation.lvl[0]][situation.lvl[1]].data.push(total)
				//
				if (results[situation.lvl[0]][situation.lvl[1]+1])
				{
					results[situation.lvl[0]][situation.lvl[1]+1].unlocked = true
				}
			}
			localStorage.setItem('agro-tetris: results',JSON.stringify(results))
		}
		else
		{
			span.innerHTML = `Trasa: ${situation.lvlName} nie ukończona.`
			div.classList.remove('complete')
		}
		span.innerHTML += `<br>Czas: ${Math.round(total[0]/60)}min &nbsp; Kroki: ${total[1]}`
		data.push({name:'podsumowanie',time:total[0],moves:total[1]})
		if (true)
		{
			const tr = document.createElement('tr')
			for (let j=0 ; j<3 ; j++)
			{
				const th = document.createElement('th')
				th.innerHTML = ['- - Punkt - -','- Czas -','- kroki -'][j]
				tr.appendChild(th)
			}
			table.appendChild(tr)
		}
		for (let i=0 ; i<data.length ; i++)
		{
			const tr = document.createElement('tr')
			for (let j=0 ; j<3 ; j++)
			{
				const td = document.createElement('td')
				td.innerHTML = data[i][['name','time','moves'][j]]+['','s',''][j]
				tr.appendChild(td)
			}
			table.appendChild(tr)
		}
		content.appendChild(span)
		content.appendChild(table)
		div.classList.remove('hidden')
		showRoutes()
		function complete()
		{
			let factor = 0.2
			if (Array.isArray(situation.lvl))
			{
				factor = Math.max((8/situation.required),10-(situation.lvl[0]||0)) * 0.05
			}
			if (total[1] > situation.required * (1+factor))
			{
				return false
			}
			else
			{
				const surplus = total[1]-situation.required
				const effectiveness = 1 - Math.min(1,(surplus/situation.required) * (1/factor))
				const procent = `${Math.min(1000,Math.round(effectiveness*1000)/10)}%`
				return procent
			}
		}
		localStorage.setItem('agro-tetris: situation','')
	}
	function required(route,lvl)
	{
		let pillar = {commodity:0,empty:0}
		for (const shop of route.shops)
		{
			for (let i=0 ; i<shop.commodity.length ; i++)
			{
				if (Array.isArray(shop.commodity[i]))
				{
					pillar.commodity += shop.commodity[i].length
				}
				else
				{
					pillar.commodity ++
				}
			}
			for (let i=0 ; i<shop.empty.length ; i++)
			{
				if (Array.isArray(shop.empty[i]))
				{
					pillar.empty += shop.empty[i].length
				}
				else
				{
					pillar.empty ++
				}
			}
		}
		return (pillar.commodity * 12) + (pillar.empty * 8)
	}
</script>
</head>
<body onload="system.load()">
	<main></main>
	<div id="hand"></div>
	<nav>
		<svg id="hamburger" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-path="menu">
			<polygon fill="white" points="0,0 0,20 100,20 100,0"></polygon>
			<polygon fill="white" points="0,40 0,60 100,60 100,40"></polygon>
			<polygon fill="white" points="0,80 0,100 100,100 100,80"></polygon>
		</svg>
		<div id="statistics"></div>
		<svg id="showPlan" viewBox="0 0 22 22" stroke="white" stroke-width="2">
			<rect height="20" width="20" y="1" x="1"></rect>
			<line x1="4" y1="6" x2="18" y2="6" />
			<line x1="4" y1="11" x2="18" y2="11" />
			<line x1="4" y1="16" x2="15" y2="16" />
		</svg>
	</nav>
	<footer>
		<div id="placeName">
		</div>
		<button>Dalej</button>
	</footer>
	<div class="window hidden" id="error">
		<div class="content"></div>
		<button>OK</button>
	</div>
	<div class="window hidden" id="tutorial">
		<div class="content"></div>
		<button>OK</button>
	</div>
	<div class="window hidden" id="curtain">
		<div class="content">Dla każdego etapu liczony jest czas.<br>Kliknij guzik gdy będziesz gotowy.</div>
		<button>Gotowy</button>
	</div>
	<div class="window hidden" id="plan">
		<div class="content"></div>
		<button>OK</button>
	</div>
	<div class="window hidden" id="routes">
		<span>Wybierz trasę</span>
		<div class="content"></div>
	</div>
	<div class="window hidden" id="finish">
		<div class="content"></div>
		<button>OK</button>
	</div>
</body>
</html>
